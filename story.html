<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Story of SPELLs — A Short Tale</title>
  <meta name="description" content="The World of SPELLs — Spin, Photon, Electron, and Lattice told as a short story for video narration."/>

  <style>
    :root{
      --bg:#071026;
      --card:#08162a;
      --glass: rgba(255,255,255,0.04);
      --accent:#88c0ff;
      --muted:#9fb6d6;
      --soft:#dceefd;
      --radius:18px;
      --maxw:1100px;
      --gap:32px;
    }

    html,body{
      height:100%;margin:0;
      font-family:Inter, "Helvetica Neue", Helvetica, Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(136,192,255,0.03), transparent), var(--bg);
      color:var(--soft);
      -webkit-font-smoothing:antialiased;
    }

    .wrap{
      max-width:var(--maxw);
      margin:30px auto;
      padding:24px;
      box-sizing:border-box;
      position:relative;
      padding-right:380px; /* 给右侧歌词栏留空间 */
    }

    header{
      display:flex;align-items:center;justify-content:space-between;
      gap:12px;margin-bottom:18px;
    }

    h1{margin:0;font-size:28px;letter-spacing:0.6px}
    p.lead{margin:8px 0 0;color:var(--muted);font-size:14px}

    /* Story container */
    .story{margin-top:24px;display:grid;gap:var(--gap);}

    /* Scene cards */
    .scene{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);
      padding:28px;
      box-shadow: 0 10px 30px rgba(2,6,12,0.6);
      position:relative;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.03);
      display:flex;
      gap:20px;
      align-items:center;
      transition:transform .6s cubic-bezier(.2,.9,.2,1), box-shadow .4s;
    }

    .scene:hover{ transform:translateY(-6px); box-shadow:0 24px 60px rgba(3,8,20,0.6); }

    .scene .icon{
      width:120px;height:120px;border-radius:14px;
      flex:0 0 120px;
      display:flex;align-items:center;justify-content:center;
      font-size:36px;font-weight:700;color:var(--bg);
      background:linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));
      filter:drop-shadow(0 8px 24px rgba(0,0,0,0.6));
    }

    .scene .body{flex:1;min-width:0}
    .scene h2{margin:0 0 8px 0;font-size:20px;color:var(--accent)}
    .scene p{margin:0;color:var(--soft);line-height:1.6;font-size:15px;opacity:0.95}

    /* Spirit color styles */
    .spin .icon{background:linear-gradient(135deg,#ffd27a,#ffb86b); color:#2b1a00}
    .photon .icon{background:linear-gradient(135deg,#ffd6ff,#caa4ff); color:#2b005b}
    .electron .icon{background:linear-gradient(135deg,#a6fff6,#71e7ff); color:#00323a}
    .lattice .icon{background:linear-gradient(135deg,#c8ffb6,#8ef08a); color:#06360b}

    /* Animation */
    .scene,.final{opacity:0;transform:translateY(18px) scale(.995);transition:opacity .9s ease,transform .9s cubic-bezier(.2,.9,.2,1);}
    .visible{opacity:1;transform:translateY(0) scale(1);}

    /* ----------------- 右侧折叠歌词 Sidebar ----------------- */

    .lyrics-sidebar{
      position:fixed;
      top:40px;
      right:20px;
      width:300px;
      height:80vh;
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.06);
      border-radius:16px;
      box-shadow:0 8px 30px rgba(0,0,0,0.5);
      backdrop-filter:blur(14px);
      padding:20px;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      transition: transform .45s ease;
    }

    .lyrics-sidebar.collapsed{
      transform: translateX(260px);
    }

    .sidebar-toggle{
      position:absolute;
      left:-38px;
      top:20px;
      width:34px;height:34px;
      border-radius:10px;
      background:#111;
      color:white;
      border:none;
      cursor:pointer;
      font-size:16px;
      box-shadow:0 4px 12px rgba(0,0,0,0.4);
    }

    .lyrics-title{font-size:16px;color:var(--accent);margin-bottom:10px}
    audio{width:100%;margin-bottom:14px}

    #lyrics-box{
      flex:1;
      overflow-y:auto;
      padding-right:6px;
    }

    #lyrics-box p{
      margin:10px 0;
      opacity:0.6;
      transition:.25s;
      line-height:1.45;
    }

    #lyrics-box p.active{
      opacity:1;
      color:#00eaff;
      font-weight:600;
      transform:scale(1.02);
    }

    /* Mobile */
    @media (max-width:960px){
      .wrap{padding-right:0}
      .lyrics-sidebar{
        width:90%;
        right:5%;
        top:auto;
        bottom:10px;
        height:50vh;
      }
      .lyrics-sidebar.collapsed{
        transform:translateY(55vh);
      }
      .sidebar-toggle{left:auto;right:10px}
    }
  </style>
</head>

<body>
  <div class="wrap" id="top">

    <!-- header -->
    <header>
      <div class="brand">
        <div>
          <h1>Story of SPELLs</h1>
          <p class="lead">A cinematic tale of Spin · Photon · Electron · Lattice.</p>
        </div>
      </div>

      <div class="controls">
        <a style="color:var(--muted);text-decoration:none;font-size:14px" href="index.html">Back Home</a>
      </div>
    </header>

    <!-- STORY CONTENT -->
    <div class="story">

      <div class="scene spin">
        <div class="icon">S</div>
        <div class="body">
          <h2>Spin — 自旋的低语</h2>
          <p>在量子材料的每一层间隙，自旋像风一样轻声摆动，它们之间的关联推动着磁性涌现。</p>
        </div>
      </div>

      <div class="scene photon">
        <div class="icon">P</div>
        <div class="body">
          <h2>Photon — 光子的瞬闪</h2>
          <p>光子的跃迁打乱了电子的宁静，带来新的激发，也重构了体系的能量地形。</p>
        </div>
      </div>

      <div class="scene electron">
        <div class="icon">E</div>
        <div class="body">
          <h2>Electron — 电子的迁徙</h2>
          <p>电子在能谷间穿梭，被自旋、光子与晶格的脉动牵引，书写着多体相互作用的篇章。</p>
        </div>
      </div>

      <div class="scene lattice">
        <div class="icon">L</div>
        <div class="body">
          <h2>Lattice — 晶格的呼吸</h2>
          <p>晶格振动像缓慢的潮汐，决定了材料的结构与稳定，也左右着电子与自旋的命运。</p>
        </div>
      </div>

    </div><!-- story end -->

  </div><!-- wrap end -->

  <!-- ----------------- 右侧可折叠歌词 Sidebar ----------------- -->
  <aside class="lyrics-sidebar" id="lyricsSidebar">

    <button class="sidebar-toggle" id="toggleBtn">♪</button>

    <div class="lyrics-title">Layers of Light — OST</div>

    <audio id="music" controls src="assets/music/layers_of_light.mp3"></audio>

    <div id="lyrics-box">

      <!-- 歌词示例，可替换 -->
      <p data-time="0">光在层间游走，自旋随之颤动</p>
      <p data-time="4">晶格的脉搏敲响电子的节奏</p>
      <p data-time="8">耦合在暗处编织新的量子纹理</p>
      <p data-time="13">每个粒子都在诉说未完成的故事</p>
      <p data-time="18">当光子闪过，能带重新排列</p>
      <p data-time="23">超导与拓扑的影子渐渐清晰</p>
      <p data-time="30">这就是 SPELLs 的世界：交织 · 涌现 · 共鸣</p>

    </div>
  </aside>

  <footer>
    <p style="text-align:center;color:var(--muted);margin-top:40px">© 2025 SPELLs Group</p>
  </footer>

  <!-- ------------ JS：进入视图渐显 + 歌词自动滚动 + Sidebar 折叠 ------------ -->
  <script>
    /* Intersection fade-in animation */
    const els = document.querySelectorAll('.scene');
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{if(e.isIntersecting) e.target.classList.add('visible');});
    },{threshold:.2});
    els.forEach(el=>io.observe(el));

    /* Sidebar toggle */
    const sidebar = document.getElementById("lyricsSidebar");
    document.getElementById("toggleBtn").onclick = () => {
      sidebar.classList.toggle("collapsed");
    };

    /* Lyrics sync */
    const audio = document.getElementById("music");
    const lines = document.querySelectorAll("#lyrics-box p");
    const box = document.getElementById("lyrics-box");

    audio.addEventListener("timeupdate", () => {
      let t = audio.currentTime;

      lines.forEach((line, i) => {
        const start = parseFloat(line.dataset.time);
        const next = i < lines.length - 1 ? parseFloat(lines[i + 1].dataset.time) : 9999;

        if (t >= start && t < next) {
          lines.forEach(l => l.classList.remove("active"));
          line.classList.add("active");
          box.scrollTop = line.offsetTop - box.clientHeight / 2;
        }
      });
    });
  </script>

</body>
</html>
